---
title: "Assignment 1"
author: "Alex Sacharow & Torben Klausa"
date: "October 07, 2016"
output: 
  pdf_document:
    toc: true
    number_sections: true
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)

#Clear Global environment
rm(list=ls())

## Setting Working directory
try(setwd("/home/torben/GIT/1st-Pair-Assignment"), silent = TRUE)
try(setwd("D:/Eigene Datein/Dokumente/Uni/Hertie/Materials/Collaborative Social Science Data Analysis/1st-Pair-Assignment"), silent = TRUE)

#Collect packages/libraries we need:
packages <- c("RCurl", "gplots", "RColorBrewer", "bitops", "plyr", "ggplot2", "vcd")

#install packages if not installed before
for (p in packages) {
  if (p %in% installed.packages()[,1]) {
    require(p, character.only=T)
  }
  else {
    install.packages(p, repos="http://cran.rstudio.com", dependencies = TRUE)
    require(p, character.only=T)
  }
}
rm(p, packages)

# Including the R script
source("getData.R")
```

# Introduction

In this assignment we draw two data sets from the GitHub repository [fivethirtyeight](https://github.com/fivethirtyeight) and apply some descriptive statistics on them.

# Data Set 1: Police Killings

The first data set we choose is about police killings in the US which was gathered by the Guardian. Information on the structure of the raw data set can be accessed on [GitHub: fivethirtyeight](https://github.com/fivethirtyeight/data/tree/master/police-killings). FiveThirtyEight wrote themselves about it on their [website](http://fivethirtyeight.com/features/where-police-have-killed-americans-in-2015/) and the corresponding Guardian story is available on [The counted](https://www.theguardian.com/us-news/ng-interactive/2015/jun/01/the-counted-police-killings-us-database). What fallows are our own descriptive statistics of the data set.

To begin we will just plot a few basic descriptives using R internal functions. The command hist() shows us the distribution of age among the killed individuals in intervals. The command plot() gives us a scatterplot. In our case the income of the county were the killing happend on the x-axis and the age of the killed individual on the y-axis.

```{r hist1, echo=FALSE}
hist(as.numeric(policeKilling$age), xlab="Age of individuals killed by police", main="Distribution of age of police victims", col="lightgreen")
```

```{r and plot, echo=FALSE}
plot(as.numeric(policeKilling$age), policeKilling$county_income, main="Scatterplot of the age and the county median income of the killed", xlab="Age of the killed individuals", ylab="Median county income")
```

## Some more sophisticated descriptive statistics

The prior plots are not really beautiful as they are basic functions of R. To illustrate the data a bit nicer we now use the package ggplot2 to illustrate what were the reasons for death.

```{r beautiful plots, echo=FALSE}
# Bar plot with ggplot2 (good intro: http://www.sthda.com/english/wiki/ggplot2-barplots-quick-start-guide-r-software-and-data-visualization)
cause.bar2 <- ggplot(data=cause.df, aes(x=cause.level, y=cause.count)) + 
  geom_bar(stat="identity", fill="steelblue") +
  theme_minimal() +
  labs(title="Number of killed by cause", 
       x="Cause", y = "Number")

# GGplot bar from stats+graphics.R script
cause.bar2
```

# Data Set 2: U.S. Birth Statistics

The second data set, again drawn from [GitHub: fivethirtyeight](https://github.com/fivethirtyeight/data/tree/master/births), contains data on daily births in the U.S. for the years 2000 to 2014, as provided by the Social Security Administration.

The average number of births per day in this time period is $`r mean(births$births)`$ with a standard deviation of $`r sd(births$births)`$. 

## Births per Day in Different Months

However, we see some differences between the months, hinting to the fact that many people probably use the cold winter months to engage in baby-generating activities:

```{r plot1, echo=FALSE}
boxplot(births$births~births$month, col=topo.colors(12), xlab = "Month", ylab = "Births", las = 2)
```

## Births on Single Days of the Week

Another interesting view is generated by plotting the number of births on the respective days of the week. What we can see here is that the weekend is used by a much lower amount of people to give birth to their babies:

```{r plot2, echo=FALSE}
boxplot(births$births~births$day_of_week, col=topo.colors(7), xlab = "Day of Week", ylab = "Births",  las = 2)
```

## Births, Days of Week, and Months

Finally, a more comprehensive view is offered by a heat map, showing that compared to other weekdays and months, on Tuesdays in July and from Tuesdays to Fridays in August most babies in the U.S. are born.

```{r heatmap, echo=FALSE}
heatmap.2(mat, main = "Births / Day", density.info = "none", trace = "none", dendrogram = "none", Rowv = NA, Colv = NA)
```
